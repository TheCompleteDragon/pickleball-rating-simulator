<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pickleball Rating Simulator</title>
  <meta name="description" content="Predict your pickleball rating changes before you play. Simulate matches, plan your path to your target rating, and track tournament progress.">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèì</text></svg>">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Pickleball Rating Simulator">
  <meta property="og:description" content="Predict your rating changes before you play">
  <meta property="og:type" content="website">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;

    function PickleballRatingSimulator() {
      // Tab state
      const [activeTab, setActiveTab] = useState('simulator');

      // Match Simulator state
      const [you, setYou] = useState({ dupr: 3.50, reliability: 25 });
      const [partner, setPartner] = useState({ dupr: 3.70, reliability: 60 });
      const [opp1, setOpp1] = useState({ dupr: 3.90, reliability: 75 });
      const [opp2, setOpp2] = useState({ dupr: 3.80, reliability: 75 });
      const [showAdvanced, setShowAdvanced] = useState(false);
      const [yourScore, setYourScore] = useState(11);
      const [theirScore, setTheirScore] = useState(9);
      const [showQuickRef, setShowQuickRef] = useState(true);

      // Path to Target state
      const [pathCurrent, setPathCurrent] = useState({ dupr: 3.50, reliability: 25 });
      const [targetDupr, setTargetDupr] = useState(4.00);
      const [selectedPath, setSelectedPath] = useState('safe');

      // Tournament Simulator state
      const [tournamentStart, setTournamentStart] = useState({ dupr: 3.50, reliability: 25 });
      const [tournamentPartner, setTournamentPartner] = useState({ dupr: 3.70, reliability: 60 });
      const [tournamentMatches, setTournamentMatches] = useState([]);
      const [newMatch, setNewMatch] = useState({ opp1: 3.80, opp2: 3.75, yourScore: 11, theirScore: 7 });

      // Core calculation function
      const calcChange = (playerR, playerRel, partnerR, partnerRel, oppAvg, ourScore, oppScore) => {
        const teamAvg = (playerR + partnerR) / 2;
        const gap = teamAvg - oppAvg;
        const expected = gap * 12;
        const actual = ourScore - oppScore;
        const perf = actual - expected;
        const k = 5 * Math.exp(-playerRel / 45);
        let mult = 1.0;
        if (gap > 0.1 && perf < 0) {
          mult = 1 + 2.0 * Math.abs(gap);
        } else if (Math.abs(gap) > 0.1) {
          mult = 1 + 1.0 * Math.abs(gap);
        }
        return 0.006 * k * perf * mult;
      };

      // Match Simulator calculations
      const teamAvg = (you.dupr + partner.dupr) / 2;
      const oppAvg = (opp1.dupr + opp2.dupr) / 2;
      const gap = teamAvg - oppAvg;
      const status = gap < -0.1 ? 'UNDERDOG' : gap > 0.1 ? 'FAVORITE' : 'EVEN';

      const scenarios = [
        { us: 11, them: 0 },
        { us: 11, them: 3 },
        { us: 11, them: 6 },
        { us: 11, them: 9 },
        { us: 9, them: 11 },
        { us: 6, them: 11 },
        { us: 3, them: 11 },
        { us: 0, them: 11 },
      ];

      // Path to Target calculations
      const pointsNeeded = targetDupr - pathCurrent.dupr;
      const isLowReliability = pathCurrent.reliability < 40;
      
      const estimateGames = (startDupr, reliability, targetDupr, partnerOffset = 0.2) => {
        const points = targetDupr - startDupr;
        if (points <= 0) return { safe: 0, aggressive: 0, safeRange: '0', aggressiveRange: '0' };
        
        const getOppAvg = (dupr) => {
          if (dupr <= 3.0) return 3.25;
          if (dupr <= 3.5) return 3.75;
          if (dupr <= 4.0) return 4.25;
          if (dupr <= 4.5) return 4.75;
          if (dupr <= 5.0) return 5.25;
          return 5.75;
        };
        
        const getAggressiveOppAvg = (dupr) => {
          if (dupr <= 3.0) return 3.75;
          if (dupr <= 3.5) return 4.25;
          if (dupr <= 4.0) return 4.75;
          if (dupr <= 4.5) return 5.25;
          return 5.75;
        };
        
        let safeGames = 0;
        let currentDupr = startDupr;
        let currentRel = reliability;
        
        while (currentDupr < targetDupr && safeGames < 100) {
          const k = 5 * Math.exp(-currentRel / 45);
          const teamAvg = (currentDupr + currentDupr + partnerOffset) / 2;
          const oppAvg = getOppAvg(currentDupr);
          const gap = teamAvg - oppAvg;
          const mult = Math.abs(gap) > 0.1 ? 1 + Math.abs(gap) : 1;
          const avgGain = 0.006 * k * 4 * mult;
          currentDupr += avgGain;
          currentRel = Math.min(100, currentRel + 15 * (100 - currentRel) / 100);
          safeGames++;
        }
        
        let aggressiveGames = 0;
        currentDupr = startDupr;
        currentRel = reliability;
        
        while (currentDupr < targetDupr && aggressiveGames < 100) {
          const k = 5 * Math.exp(-currentRel / 45);
          const teamAvg = (currentDupr + currentDupr + partnerOffset) / 2;
          const oppAvg = getAggressiveOppAvg(currentDupr);
          const gap = teamAvg - oppAvg;
          const mult = Math.abs(gap) > 0.1 ? 1 + Math.abs(gap) : 1;
          const avgGain = 0.006 * k * 8 * mult;
          currentDupr += avgGain;
          currentRel = Math.min(100, currentRel + 15 * (100 - currentRel) / 100);
          aggressiveGames++;
        }
        
        return { 
          safe: safeGames, 
          aggressive: aggressiveGames,
          safeRange: `${Math.max(1, Math.floor(safeGames * 0.8))}-${Math.ceil(safeGames * 1.3)}`,
          aggressiveRange: `${Math.max(1, Math.floor(aggressiveGames * 0.7))}-${Math.ceil(aggressiveGames * 1.4)}`
        };
      };
      
      const gameEstimates = estimateGames(pathCurrent.dupr, pathCurrent.reliability, targetDupr);
      
      const getBracket = (dupr) => {
        if (dupr <= 3.0) return { play: '3.0 - 3.5', avoid: '2.5 - 3.0', oppAvg: 3.25 };
        if (dupr <= 3.5) return { play: '3.5 - 4.0', avoid: '3.0 - 3.5', oppAvg: 3.75 };
        if (dupr <= 4.0) return { play: '4.0 - 4.5', avoid: '3.5 - 4.0', oppAvg: 4.25 };
        if (dupr <= 4.5) return { play: '4.5 - 5.0', avoid: '4.0 - 4.5', oppAvg: 4.75 };
        return { play: '5.0 - 5.5', avoid: '4.5 - 5.0', oppAvg: 5.25 };
      };

      const bracket = getBracket(pathCurrent.dupr);
      
      const getAggressiveBracket = (dupr) => {
        if (dupr <= 3.0) return { play: '3.5 - 4.0', oppAvg: 3.75 };
        if (dupr <= 3.5) return { play: '4.0 - 4.5', oppAvg: 4.25 };
        if (dupr <= 4.0) return { play: '4.5 - 5.0', oppAvg: 4.75 };
        if (dupr <= 4.5) return { play: '5.0 - 5.5', oppAvg: 5.25 };
        return { play: '5.5+', oppAvg: 5.75 };
      };
      const aggressiveBracket = getAggressiveBracket(pathCurrent.dupr);
      
      const partnerRange = {
        low: Math.max(2.0, pathCurrent.dupr + 0.05),
        high: Math.min(8.0, pathCurrent.dupr + 0.35)
      };
      
      const partnerMid = (partnerRange.low + partnerRange.high) / 2;
      const projectedTeamAvg = (pathCurrent.dupr + partnerMid) / 2;
      const projectedGap = projectedTeamAvg - bracket.oppAvg;
      const projectedExpectedMargin = projectedGap * 12;
      const aggressiveGap = projectedTeamAvg - aggressiveBracket.oppAvg;
      const aggressiveExpectedMargin = aggressiveGap * 12;

      // Custom Rating Input Component
      const DuprInput = ({ value, onChange, label }) => {
        const adjust = (delta) => {
          const newVal = Math.max(2.0, Math.min(8.0, value + delta));
          onChange(Math.round(newVal * 100) / 100);
        };
        
        return (
          <div>
            <label className="block text-xs font-medium text-gray-500 uppercase tracking-wide mb-2">{label}</label>
            <div className="flex items-center bg-white border-2 border-gray-200 rounded-xl overflow-hidden transition-all duration-200 hover:border-blue-300 focus-within:border-blue-500 focus-within:ring-4 focus-within:ring-blue-100">
              <button
                onClick={() => adjust(-0.01)}
                className="px-4 py-3 text-gray-400 hover:text-blue-600 hover:bg-blue-50 transition-all duration-150 text-xl font-medium active:scale-95"
              >
                ‚àí
              </button>
              <input
                type="text"
                value={value.toFixed(2)}
                onChange={(e) => {
                  const v = parseFloat(e.target.value);
                  if (!isNaN(v) && v >= 2.0 && v <= 8.0) onChange(v);
                }}
                className="w-full text-center py-3 text-2xl font-bold text-gray-800 focus:outline-none bg-transparent"
              />
              <button
                onClick={() => adjust(0.01)}
                className="px-4 py-3 text-gray-400 hover:text-blue-600 hover:bg-blue-50 transition-all duration-150 text-xl font-medium active:scale-95"
              >
                +
              </button>
            </div>
          </div>
        );
      };

      // Reliability Slider Component
      const ReliabilitySlider = ({ value, onChange, label }) => {
        const [localValue, setLocalValue] = useState(String(value));
        const [isFocused, setIsFocused] = useState(false);

        useEffect(() => {
          if (!isFocused) {
            setLocalValue(String(value));
          }
        }, [value, isFocused]);
        
        const getColor = () => {
          if (value < 30) return 'from-orange-400 to-orange-500';
          if (value < 60) return 'from-yellow-400 to-yellow-500';
          return 'from-green-400 to-green-500';
        };

        const handleInputChange = (e) => {
          setLocalValue(e.target.value);
        };

        const handleFocus = (e) => {
          setIsFocused(true);
          e.target.select();
        };

        const handleBlur = () => {
          setIsFocused(false);
          const num = parseInt(localValue);
          if (isNaN(num) || num < 1) {
            onChange(1);
            setLocalValue('1');
          } else if (num > 100) {
            onChange(100);
            setLocalValue('100');
          } else {
            onChange(num);
            setLocalValue(String(num));
          }
        };

        const handleKeyDown = (e) => {
          if (e.key === 'Enter') {
            e.target.blur();
          }
        };

        const handleSliderChange = (e) => {
          const v = parseInt(e.target.value);
          onChange(v);
          setLocalValue(String(v));
        };
        
        return (
          <div>
            <div className="flex justify-between items-center mb-2">
              <label className="text-xs font-medium text-gray-500 uppercase tracking-wide">{label}</label>
              <div className="flex items-center gap-1">
                <input
                  type="text"
                  inputMode="numeric"
                  value={localValue}
                  onChange={handleInputChange}
                  onFocus={handleFocus}
                  onBlur={handleBlur}
                  onKeyDown={handleKeyDown}
                  className={`w-14 text-center text-sm font-bold px-2 py-1 rounded-full border-2 border-transparent focus:outline-none focus:border-blue-400 transition-colors ${
                    value < 30 ? 'bg-orange-100 text-orange-600' :
                    value < 60 ? 'bg-yellow-100 text-yellow-700' :
                    'bg-green-100 text-green-600'
                  }`}
                />
                <span className="text-sm font-bold text-gray-400">%</span>
              </div>
            </div>
            <div className="relative">
              <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  className={`h-full bg-gradient-to-r ${getColor()} transition-all duration-300 rounded-full`}
                  style={{ width: `${value}%` }}
                />
              </div>
              <input
                type="range"
                min="1"
                max="100"
                value={value}
                onChange={handleSliderChange}
                className="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
              />
            </div>
            <div className="flex justify-between text-xs text-gray-400 mt-1">
              <span>New</span>
              <span>Established</span>
            </div>
          </div>
        );
      };

      // Player Card Component
      const PlayerCard = ({ title, player, setPlayer, colorClass, icon }) => (
        <div className={`bg-white rounded-2xl border-2 ${colorClass} p-5 shadow-sm hover:shadow-md transition-all duration-300`}>
          <div className="flex items-center gap-2 mb-4">
            <span className="text-lg">{icon}</span>
            <h3 className="font-bold text-gray-800">{title}</h3>
          </div>
          <div className="space-y-5">
            <DuprInput 
              value={player.dupr} 
              onChange={(v) => setPlayer({ ...player, dupr: v })}
              label="Rating"
            />
            <ReliabilitySlider 
              value={player.reliability} 
              onChange={(v) => setPlayer({ ...player, reliability: v })}
              label="Reliability"
            />
          </div>
        </div>
      );

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-blue-50 p-4 md:p-6">
          {/* Header */}
          <div className="max-w-2xl mx-auto mb-6">
            <div className="flex items-center gap-3 mb-4">
              <div className="w-14 h-14 relative">
                <svg viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-full h-full drop-shadow-md">
                  <ellipse cx="22" cy="22" rx="14" ry="16" fill="url(#paddleGrad)" />
                  <ellipse cx="22" cy="22" rx="14" ry="16" stroke="#1e3a8a" strokeWidth="2" fill="none"/>
                  <circle cx="17" cy="16" r="2" fill="#1e3a8a" fillOpacity="0.2"/>
                  <circle cx="22" cy="13" r="2" fill="#1e3a8a" fillOpacity="0.2"/>
                  <circle cx="27" cy="16" r="2" fill="#1e3a8a" fillOpacity="0.2"/>
                  <circle cx="15" cy="22" r="2" fill="#1e3a8a" fillOpacity="0.2"/>
                  <circle cx="22" cy="22" r="2" fill="#1e3a8a" fillOpacity="0.2"/>
                  <circle cx="29" cy="22" r="2" fill="#1e3a8a" fillOpacity="0.2"/>
                  <circle cx="17" cy="28" r="2" fill="#1e3a8a" fillOpacity="0.2"/>
                  <circle cx="22" cy="31" r="2" fill="#1e3a8a" fillOpacity="0.2"/>
                  <circle cx="27" cy="28" r="2" fill="#1e3a8a" fillOpacity="0.2"/>
                  <rect x="17" y="36" width="10" height="14" rx="3" fill="url(#handleGrad)" stroke="#1e3a8a" strokeWidth="2"/>
                  <circle cx="42" cy="16" r="12" fill="url(#ballGrad)" stroke="#c2410c" strokeWidth="2"/>
                  <circle cx="38" cy="12" r="1.5" fill="#c2410c" fillOpacity="0.3"/>
                  <circle cx="43" cy="9" r="1.5" fill="#c2410c" fillOpacity="0.3"/>
                  <circle cx="47" cy="13" r="1.5" fill="#c2410c" fillOpacity="0.3"/>
                  <circle cx="38" cy="18" r="1.5" fill="#c2410c" fillOpacity="0.3"/>
                  <circle cx="44" cy="16" r="1.5" fill="#c2410c" fillOpacity="0.3"/>
                  <circle cx="48" cy="19" r="1.5" fill="#c2410c" fillOpacity="0.3"/>
                  <circle cx="41" cy="22" r="1.5" fill="#c2410c" fillOpacity="0.3"/>
                  <defs>
                    <linearGradient id="paddleGrad" x1="8" y1="6" x2="36" y2="38" gradientUnits="userSpaceOnUse">
                      <stop stopColor="#60a5fa"/>
                      <stop offset="1" stopColor="#2563eb"/>
                    </linearGradient>
                    <linearGradient id="handleGrad" x1="17" y1="36" x2="27" y2="50" gradientUnits="userSpaceOnUse">
                      <stop stopColor="#1e40af"/>
                      <stop offset="1" stopColor="#1e3a8a"/>
                    </linearGradient>
                    <linearGradient id="ballGrad" x1="30" y1="4" x2="54" y2="28" gradientUnits="userSpaceOnUse">
                      <stop stopColor="#fde047"/>
                      <stop offset="1" stopColor="#facc15"/>
                    </linearGradient>
                  </defs>
                </svg>
              </div>
              <div>
                <h1 className="text-2xl font-extrabold text-gray-900">Pickleball Rating Simulator</h1>
                <p className="text-sm text-gray-500">Predict your rating change before you play</p>
              </div>
            </div>

            {/* Tab Navigation */}
            <div className="flex bg-white rounded-xl p-1 shadow-sm border border-gray-200">
              <button
                onClick={() => setActiveTab('simulator')}
                className={`flex-1 py-3 px-2 rounded-lg text-xs sm:text-sm font-semibold transition-all duration-200 ${
                  activeTab === 'simulator'
                    ? 'bg-blue-600 text-white shadow-md'
                    : 'text-gray-600 hover:bg-gray-100'
                }`}
              >
                Match
              </button>
              <button
                onClick={() => setActiveTab('path')}
                className={`flex-1 py-3 px-2 rounded-lg text-xs sm:text-sm font-semibold transition-all duration-200 ${
                  activeTab === 'path'
                    ? 'bg-blue-600 text-white shadow-md'
                    : 'text-gray-600 hover:bg-gray-100'
                }`}
              >
                Path to Target
              </button>
              <button
                onClick={() => setActiveTab('tournament')}
                className={`flex-1 py-3 px-2 rounded-lg text-xs sm:text-sm font-semibold transition-all duration-200 ${
                  activeTab === 'tournament'
                    ? 'bg-blue-600 text-white shadow-md'
                    : 'text-gray-600 hover:bg-gray-100'
                }`}
              >
                Tournament
              </button>
            </div>
          </div>

          {/* ==================== MATCH SIMULATOR TAB ==================== */}
          {activeTab === 'simulator' && (
            <div className="max-w-2xl mx-auto space-y-6">
              {/* Your Team Section */}
              <div>
                <div className="flex items-center gap-2 mb-3">
                  <div className="w-2 h-6 bg-blue-500 rounded-full"></div>
                  <h2 className="text-sm font-bold text-gray-600 uppercase tracking-wide">Your Team</h2>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <PlayerCard 
                    title="You" 
                    player={you} 
                    setPlayer={setYou}
                    colorClass="border-blue-200 hover:border-blue-300"
                    icon="üë§"
                  />
                  <PlayerCard 
                    title="Partner" 
                    player={partner} 
                    setPlayer={setPartner}
                    colorClass="border-blue-100 hover:border-blue-200"
                    icon="ü§ù"
                  />
                </div>
              </div>

              {/* Opponents Section */}
              <div>
                <div className="flex items-center gap-2 mb-3">
                  <div className="w-2 h-6 bg-orange-500 rounded-full"></div>
                  <h2 className="text-sm font-bold text-gray-600 uppercase tracking-wide">Opponents</h2>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <PlayerCard 
                    title="Opponent 1" 
                    player={opp1} 
                    setPlayer={setOpp1}
                    colorClass="border-orange-200 hover:border-orange-300"
                    icon="üéØ"
                  />
                  <PlayerCard 
                    title="Opponent 2" 
                    player={opp2} 
                    setPlayer={setOpp2}
                    colorClass="border-orange-100 hover:border-orange-200"
                    icon="üéØ"
                  />
                </div>
              </div>

              {/* Match Analysis Card */}
              <div className="bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden">
                <div className="bg-gradient-to-r from-gray-50 to-white px-5 py-4 border-b border-gray-100">
                  <div className="flex justify-between items-center">
                    <h3 className="font-bold text-gray-800">Match Analysis</h3>
                    <span className={`text-xs font-bold px-3 py-1.5 rounded-full ${
                      status === 'UNDERDOG' ? 'bg-green-100 text-green-700 ring-2 ring-green-200' :
                      status === 'FAVORITE' ? 'bg-orange-100 text-orange-700 ring-2 ring-orange-200' :
                      'bg-gray-100 text-gray-600 ring-2 ring-gray-200'
                    }`}>
                      {status === 'UNDERDOG' ? '‚Üó UNDERDOG' : status === 'FAVORITE' ? '‚Üò FAVORITE' : '= EVEN'}
                    </span>
                  </div>
                </div>
                
                <div className="p-5">
                  <div className="grid grid-cols-3 gap-3 mb-5">
                    <div className="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 text-center">
                      <div className="text-xs text-blue-600 font-medium mb-1">Your Team</div>
                      <div className="text-3xl font-extrabold text-blue-700">{teamAvg.toFixed(2)}</div>
                    </div>
                    <div className="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 text-center">
                      <div className="text-xs text-gray-500 font-medium mb-1">Gap</div>
                      <div className={`text-3xl font-extrabold ${
                        gap < -0.1 ? 'text-green-600' : gap > 0.1 ? 'text-orange-600' : 'text-gray-600'
                      }`}>
                        {gap >= 0 ? '+' : ''}{gap.toFixed(2)}
                      </div>
                    </div>
                    <div className="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 text-center">
                      <div className="text-xs text-orange-600 font-medium mb-1">Opponents</div>
                      <div className="text-3xl font-extrabold text-orange-700">{oppAvg.toFixed(2)}</div>
                    </div>
                  </div>

                  <div className="bg-gray-50 rounded-xl p-4 text-center">
                    <span className="text-gray-500">Expected outcome: </span>
                    <span className="font-bold text-gray-800">
                      {Math.abs(gap * 12) < 0.5 ? 'Toss-up game' : 
                        `${gap >= 0 ? 'Win' : 'Lose'} by ~${Math.abs(gap * 12).toFixed(0)} points`
                      }
                    </span>
                  </div>
                </div>
              </div>

              {/* Score Input Section */}
              <div className="bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden">
                <div className="bg-gradient-to-r from-gray-50 to-white px-5 py-4 border-b border-gray-100">
                  <h3 className="font-bold text-gray-800">Score Calculator</h3>
                  <p className="text-xs text-gray-500 mt-0.5">Enter the final score to see your rating change</p>
                </div>
                
                <div className="p-6">
                  <div className="flex items-center justify-center gap-4 mb-6">
                    <div className="text-center">
                      <div className="text-xs font-semibold text-blue-600 uppercase tracking-wide mb-2">Your Team</div>
                      <div className="flex items-center bg-blue-50 rounded-2xl p-2 border-2 border-blue-200">
                        <button
                          onClick={() => setYourScore(Math.max(0, yourScore - 1))}
                          className="w-12 h-12 rounded-xl bg-white text-blue-600 font-bold text-2xl shadow-sm hover:shadow-md hover:bg-blue-600 hover:text-white transition-all duration-200 active:scale-95"
                        >
                          ‚àí
                        </button>
                        <span className="w-16 text-center text-4xl font-extrabold text-blue-700">{yourScore}</span>
                        <button
                          onClick={() => setYourScore(Math.min(15, yourScore + 1))}
                          className="w-12 h-12 rounded-xl bg-white text-blue-600 font-bold text-2xl shadow-sm hover:shadow-md hover:bg-blue-600 hover:text-white transition-all duration-200 active:scale-95"
                        >
                          +
                        </button>
                      </div>
                    </div>

                    <div className="flex flex-col items-center gap-1 pt-6">
                      <div className="w-4 h-4 rounded-full bg-gray-300"></div>
                      <div className="text-gray-400 font-bold text-lg">vs</div>
                      <div className="w-4 h-4 rounded-full bg-gray-300"></div>
                    </div>

                    <div className="text-center">
                      <div className="text-xs font-semibold text-orange-600 uppercase tracking-wide mb-2">Opponents</div>
                      <div className="flex items-center bg-orange-50 rounded-2xl p-2 border-2 border-orange-200">
                        <button
                          onClick={() => setTheirScore(Math.max(0, theirScore - 1))}
                          className="w-12 h-12 rounded-xl bg-white text-orange-600 font-bold text-2xl shadow-sm hover:shadow-md hover:bg-orange-600 hover:text-white transition-all duration-200 active:scale-95"
                        >
                          ‚àí
                        </button>
                        <span className="w-16 text-center text-4xl font-extrabold text-orange-700">{theirScore}</span>
                        <button
                          onClick={() => setTheirScore(Math.min(15, theirScore + 1))}
                          className="w-12 h-12 rounded-xl bg-white text-orange-600 font-bold text-2xl shadow-sm hover:shadow-md hover:bg-orange-600 hover:text-white transition-all duration-200 active:scale-95"
                        >
                          +
                        </button>
                      </div>
                    </div>
                  </div>

                  {(() => {
                    const change = calcChange(you.dupr, you.reliability, partner.dupr, partner.reliability, oppAvg, yourScore, theirScore);
                    const isWin = yourScore > theirScore;
                    const isTie = yourScore === theirScore;
                    const isPositive = change > 0.005;
                    const isNegative = change < -0.005;
                    
                    return (
                      <div className={`rounded-2xl p-6 text-center ${
                        isTie ? 'bg-gray-50 border-2 border-gray-200' :
                        isWin ? 'bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200' : 
                        'bg-gradient-to-br from-red-50 to-orange-50 border-2 border-red-200'
                      }`}>
                        {isTie ? (
                          <div className="text-gray-500 font-medium">Enter a final score above</div>
                        ) : (
                          <>
                            <div className={`inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-sm font-bold mb-3 ${
                              isWin ? 'bg-green-200 text-green-800' : 'bg-red-200 text-red-800'
                            }`}>
                              {isWin ? 'üéâ WIN' : 'üòî LOSS'}
                            </div>
                            
                            <div className={`text-5xl font-extrabold mb-2 ${
                              isPositive ? 'text-green-600' : isNegative ? 'text-red-500' : 'text-gray-500'
                            }`}>
                              {change >= 0 ? '+' : ''}{change.toFixed(3)}
                            </div>
                            
                            <div className="flex items-center justify-center gap-3 text-lg">
                              <span className="text-gray-400">{you.dupr.toFixed(2)}</span>
                              <span className="text-gray-300">‚Üí</span>
                              <span className={`font-bold ${
                                isPositive ? 'text-green-700' : isNegative ? 'text-red-600' : 'text-gray-700'
                              }`}>
                                {(you.dupr + change).toFixed(2)}
                              </span>
                            </div>
                          </>
                        )}
                      </div>
                    );
                  })()}
                </div>
              </div>

              {/* Quick Reference */}
              <div className="bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden">
                <button 
                  onClick={() => setShowQuickRef(!showQuickRef)}
                  className="w-full flex items-center justify-between px-5 py-4 hover:bg-gray-50 transition-colors"
                >
                  <div className="flex items-center gap-2">
                    <span className="text-lg">üìä</span>
                    <span className="font-bold text-gray-800">Quick Reference</span>
                    <span className="text-xs text-gray-400">Common score outcomes</span>
                  </div>
                  <span className={`text-gray-400 transition-transform duration-200 ${showQuickRef ? 'rotate-180' : ''}`}>‚ñº</span>
                </button>
                
                {showQuickRef && (
                  <div className="border-t border-gray-100">
                    <div className="grid grid-cols-2 divide-x divide-gray-100">
                      <div>
                        <div className="px-4 py-2 bg-green-50 border-b border-green-100">
                          <span className="text-xs font-bold text-green-700 uppercase">Wins</span>
                        </div>
                        {scenarios.filter(s => s.us > s.them).map(({ us, them }, idx) => {
                          const change = calcChange(you.dupr, you.reliability, partner.dupr, partner.reliability, oppAvg, us, them);
                          return (
                            <div 
                              key={idx}
                              onClick={() => { setYourScore(us); setTheirScore(them); }}
                              className="flex items-center justify-between px-4 py-2.5 hover:bg-green-50 cursor-pointer transition-colors border-b border-gray-50 last:border-0"
                            >
                              <span className="font-mono text-sm font-semibold text-gray-700">{us}-{them}</span>
                              <span className="font-mono font-bold text-green-600">+{change.toFixed(3)}</span>
                            </div>
                          );
                        })}
                      </div>
                      
                      <div>
                        <div className="px-4 py-2 bg-red-50 border-b border-red-100">
                          <span className="text-xs font-bold text-red-700 uppercase">Losses</span>
                        </div>
                        {scenarios.filter(s => s.us < s.them).map(({ us, them }, idx) => {
                          const change = calcChange(you.dupr, you.reliability, partner.dupr, partner.reliability, oppAvg, us, them);
                          return (
                            <div 
                              key={idx}
                              onClick={() => { setYourScore(us); setTheirScore(them); }}
                              className="flex items-center justify-between px-4 py-2.5 hover:bg-red-50 cursor-pointer transition-colors border-b border-gray-50 last:border-0"
                            >
                              <span className="font-mono text-sm font-semibold text-gray-700">{us}-{them}</span>
                              <span className="font-mono font-bold text-red-500">{change.toFixed(3)}</span>
                            </div>
                          );
                        })}
                      </div>
                    </div>
                  </div>
                )}
              </div>

              {/* Footer */}
              <div className="text-center text-xs text-gray-400 py-4">
                Estimates based on reverse-engineered rating algorithm ‚Ä¢ Results may vary ¬±0.01
                <br />
                <span className="text-gray-300">Not affiliated with or endorsed by any official rating system</span>
              </div>
            </div>
          )}

          {/* Path to Target and Tournament tabs would go here - truncated for length */}
          {activeTab === 'path' && (
            <div className="max-w-2xl mx-auto">
              <div className="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm text-center">
                <h3 className="font-bold text-gray-800 mb-2">Path to Target</h3>
                <p className="text-gray-500">Plan your journey to your target rating</p>
                <p className="text-sm text-gray-400 mt-4">Full functionality available in the complete version</p>
              </div>
            </div>
          )}

          {activeTab === 'tournament' && (
            <div className="max-w-2xl mx-auto">
              <div className="bg-white rounded-2xl border border-gray-200 p-6 shadow-sm text-center">
                <h3 className="font-bold text-gray-800 mb-2">Tournament Simulator</h3>
                <p className="text-gray-500">Track your rating across multiple matches</p>
                <p className="text-sm text-gray-400 mt-4">Full functionality available in the complete version</p>
              </div>
            </div>
          )}
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<PickleballRatingSimulator />);
  </script>
</body>
</html>
